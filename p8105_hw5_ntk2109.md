Homework Five
================
Noah Kreski
November 3, 2018

### Problem One

``` r
#I am creating a dataframe of tidy longitudinal data
df = tibble(
  #I am beginning by getting all file names using list.files
  filenames = list.files("./data/Longitudinal/", full.names = T),
  #I am using the map function to iterate over files and save the result as a new variable
  map(filenames,read_csv))%>%
  #In order to further tidy the data, I am unnesting
 unnest()%>%
  #I'm gathering the data values to tidy them
 gather(key = week, value = value, week_1:week_8)%>%
  #I am mutating file names to just have arm and ID
 mutate(week = as.numeric(str_replace(week, "week_","")))%>%
 mutate(filenames = str_replace(filenames, "./data/Longitudinal/", ""))%>%
 mutate(filenames = str_replace(filenames, ".csv", ""))%>%
 mutate(filenames = str_replace(filenames, "con", "Control"))%>%
 mutate(filenames = str_replace(filenames, "exp", "Experimental"))%>%
  #I am creating a copy of the filename to split into ID and Arm variables
 mutate(filenames_split = filenames)%>%
 separate(filenames_split, into = c("arm", "subject_id"), sep = "_")%>%
 mutate(arm = as.factor(arm))%>%
 mutate(subject_id=as.numeric(subject_id))
#I want to show the final data frame
df
```

    ## # A tibble: 160 x 5
    ##    filenames   week value arm     subject_id
    ##    <chr>      <dbl> <dbl> <fct>        <dbl>
    ##  1 Control_01     1  0.2  Control          1
    ##  2 Control_02     1  1.13 Control          2
    ##  3 Control_03     1  1.77 Control          3
    ##  4 Control_04     1  1.04 Control          4
    ##  5 Control_05     1  0.47 Control          5
    ##  6 Control_06     1  2.37 Control          6
    ##  7 Control_07     1  0.03 Control          7
    ##  8 Control_08     1 -0.08 Control          8
    ##  9 Control_09     1  0.08 Control          9
    ## 10 Control_10     1  2.14 Control         10
    ## # ... with 150 more rows

``` r
#I am plotting data over time by participant, grouped by arm
ggplot(data = df, aes(x=week, y = value, group = filenames , color = arm))+ geom_line()
```

![](p8105_hw5_ntk2109_files/figure-markdown_github/Problem%20One-1.png)

The above visual shows the patterns in data over time by participant, grouped by arm. The experimental arm showed much more growth over time, whereas the control group values stagnated.

### Problem Two

``` r
Washington_data = read_csv("./data/WashingtonPost/homicide-data.csv")%>%
                  mutate(city_state = paste(city,state, sep = ","))
Washington_data%>%
                  group_by(city_state)%>%
                  summarize(n = n())
```

    ## # A tibble: 51 x 2
    ##    city_state         n
    ##    <chr>          <int>
    ##  1 Albuquerque,NM   378
    ##  2 Atlanta,GA       973
    ##  3 Baltimore,MD    2827
    ##  4 Baton Rouge,LA   424
    ##  5 Birmingham,AL    800
    ##  6 Boston,MA        614
    ##  7 Buffalo,NY       521
    ##  8 Charlotte,NC     687
    ##  9 Chicago,IL      5535
    ## 10 Cincinnati,OH    694
    ## # ... with 41 more rows

``` r
Washington_data%>%
                  filter(disposition != "Closed by arrest")%>%
                  group_by(city_state)%>%
                  summarize(n = n())
```

    ## # A tibble: 50 x 2
    ##    city_state         n
    ##    <chr>          <int>
    ##  1 Albuquerque,NM   146
    ##  2 Atlanta,GA       373
    ##  3 Baltimore,MD    1825
    ##  4 Baton Rouge,LA   196
    ##  5 Birmingham,AL    347
    ##  6 Boston,MA        310
    ##  7 Buffalo,NY       319
    ##  8 Charlotte,NC     206
    ##  9 Chicago,IL      4073
    ## 10 Cincinnati,OH    309
    ## # ... with 40 more rows
